# Epic 4: Multi-Agent Content Moderation System

## Epic Goal

å®ç° Trustless SocialFi çš„æ ¸å¿ƒå·®å¼‚åŒ–åŠŸèƒ½ï¼šå¤š Agent å»ä¸­å¿ƒåŒ–å†…å®¹å®¡æ ¸ç³»ç»Ÿã€‚æ•´åˆ Chainlink VRF éšæœºé€‰æ‹© Agentï¼Œå¼€å‘ Agent å®¡æ ¸æœåŠ¡ï¼ˆè°ƒç”¨ OpenAI GPT-4 API åˆ¤æ–­å†…å®¹åˆè§„æ€§ï¼‰ï¼Œå®ç°åŠ æƒå…±è¯†æŠ•ç¥¨æ™ºèƒ½åˆçº¦ï¼Œå¼€å‘å®¡æ ¸ç»“æœé€æ˜å±•ç¤ºå‰ç«¯ç•Œé¢ã€‚ä¿®æ”¹ Epic 3 çš„å†…å®¹å‘å¸ƒæµç¨‹ï¼Œæ‰€æœ‰æ–°å†…å®¹å¿…é¡»ç»è¿‡ Agent å®¡æ ¸ï¼Œé€šè¿‡åæ‰èƒ½å‘å¸ƒåˆ°æ—¶é—´çº¿ã€‚æ­¤ Epic å®Œæˆåï¼Œå¹³å°å®ç°"å»ä¸­å¿ƒåŒ–å†…å®¹æ²»ç† + è´¨é‡ä¿è¯"çš„æ ¸å¿ƒä»·å€¼ä¸»å¼ ã€‚

## Story 4.1: Chainlink VRF éšæœº Agent é€‰æ‹©åˆçº¦

As a **æ™ºèƒ½åˆçº¦å¼€å‘è€…**,  
I want **é›†æˆ Chainlink VRF v2.5ï¼Œå®ç°éšæœºé€‰æ‹© 5 ä¸ª Agent çš„å‡½æ•°ï¼ˆé€‰æ‹©æ¦‚ç‡åŸºäº Agent ä¿¡èª‰è¯„åˆ†åŠ æƒï¼‰**,  
so that **å†…å®¹å®¡æ ¸è¿‡ç¨‹å…¬å¹³ä¸”ä¸å¯é¢„æµ‹ï¼Œé˜²æ­¢ Agent ä¸²é€šæˆ–æ“çºµå®¡æ ¸ç»“æœ**ã€‚

### Acceptance Criteria

1. å®‰è£… Chainlink Contractsï¼š`forge install smartcontractkit/chainlink-brownie-contracts`
2. åˆ›å»ºåˆçº¦ `src/AgentSelector.sol`ï¼Œç»§æ‰¿ `VRFConsumerBaseV2`
3. é…ç½® Chainlink VRF Coordinatorï¼ˆArbitrum Sepolia åœ°å€ï¼‰
4. å®ç°å‡½æ•° `requestAgentSelection(uint256 contentId)`ï¼š
   - è°ƒç”¨ Chainlink VRF `requestRandomWords()`
   - å­˜å‚¨ requestId â†’ contentId æ˜ å°„
   - è§¦å‘äº‹ä»¶ `AgentSelectionRequested(uint256 indexed contentId, uint256 requestId)`
5. å®ç°å›è°ƒå‡½æ•° `fulfillRandomWords(uint256 requestId, uint256[] memory randomWords)`ï¼š
   - ä» AgentRegistry è·å–æ‰€æœ‰æ´»è·ƒ Agent
   - åŸºäºä¿¡èª‰è¯„åˆ†è®¡ç®—åŠ æƒæ¦‚ç‡åˆ†å¸ƒ
   - ä½¿ç”¨éšæœºæ•°é€‰æ‹© 5 ä¸ªä¸é‡å¤çš„ Agent
   - å­˜å‚¨ contentId â†’ selectedAgents æ˜ å°„
   - è§¦å‘äº‹ä»¶ `AgentsSelected(uint256 indexed contentId, address[] agents)`
6. å®ç°å‡½æ•° `getSelectedAgents(uint256 contentId)` è¿”å›é€‰ä¸­çš„ 5 ä¸ª Agent åœ°å€
7. ç¼–å†™æµ‹è¯• `test/AgentSelector.t.sol`ï¼š
   - Mock VRF Coordinator
   - æµ‹è¯•è¯·æ±‚éšæœºæ•°
   - æµ‹è¯• Agent é€‰æ‹©é€»è¾‘ï¼ˆåŠ æƒæ¦‚ç‡ï¼‰
   - æµ‹è¯•é€‰æ‹© 5 ä¸ªä¸é‡å¤ Agent
8. è¿è¡Œ `forge test` æ‰€æœ‰æµ‹è¯•é€šè¿‡
9. éƒ¨ç½²åˆ°æœ¬åœ° Anvilï¼ˆä½¿ç”¨ Mock VRF Coordinatorï¼‰
10. åœ¨ `packages/shared/src/constants/contracts.ts` æ·»åŠ  AgentSelector åœ°å€

## Story 4.2: Agent å®¡æ ¸æœåŠ¡å¼€å‘ï¼ˆOpenAI é›†æˆï¼‰

As a **åç«¯å¼€å‘è€…**,  
I want **å¼€å‘ Agent å®¡æ ¸æœåŠ¡ï¼Œæ¥æ”¶å†…å®¹æ–‡æœ¬å’Œåˆè§„è§„åˆ™ï¼Œè°ƒç”¨ OpenAI GPT-4 API åˆ¤æ–­æ˜¯å¦åˆè§„ï¼Œè¿”å›åˆ¤æ–­ç»“æœï¼ˆé€šè¿‡/æ‹’ç»ï¼‰å’Œç½®ä¿¡åº¦**,  
so that **Agent å¯ä»¥è‡ªåŠ¨åŒ–å®¡æ ¸å†…å®¹ï¼Œè¿‡æ»¤è¿è§„å†…å®¹ï¼ˆæš´åŠ›ã€è¯ˆéª—ã€ä»‡æ¨è¨€è®ºï¼‰ï¼Œç¡®ä¿å¹³å°å†…å®¹è´¨é‡**ã€‚

### Acceptance Criteria

1. å®‰è£… OpenAI SDKï¼š`pnpm add openai`
2. é…ç½®ç¯å¢ƒå˜é‡ï¼š`OPENAI_API_KEY`
3. åœ¨ `src/services/moderation.ts` åˆ›å»ºå®¡æ ¸æœåŠ¡
4. å®šä¹‰åˆè§„è§„åˆ™ï¼ˆ`src/config/moderation-rules.ts`ï¼‰ï¼š
   - ç¦æ­¢æš´åŠ›å†…å®¹
   - ç¦æ­¢è¯ˆéª—ä¿¡æ¯
   - ç¦æ­¢ä»‡æ¨è¨€è®º
   - ç¦æ­¢æˆäººå†…å®¹ï¼ˆNSFWï¼‰
   - ç¦æ­¢è™šå‡ä¿¡æ¯ï¼ˆæ˜æ˜¾çš„è°£è¨€ï¼‰
5. å®ç°å‡½æ•° `moderateContent(content: string)`ï¼š
   - æ„å»º Promptï¼ˆåŒ…å«å†…å®¹å’Œè§„åˆ™ï¼‰
   - è°ƒç”¨ OpenAI API `chat.completions.create()`ï¼š
     - Model: `gpt-4-turbo-preview`
     - Temperature: 0.2
     - Max tokens: 500
   - è§£æ AI å“åº”ï¼šåˆ¤æ–­ï¼ˆPass/Rejectï¼‰ã€ç½®ä¿¡åº¦ï¼ˆ0-100ï¼‰ã€æ‹’ç»åŸå› ï¼ˆå¦‚æœæ‹’ç»ï¼‰
   - è¿”å› `{ decision: 'Pass' | 'Reject', confidence: number, reason?: string }`
6. å®ç° Prompt å·¥ç¨‹ï¼š

   ```
   ä½ æ˜¯å†…å®¹å®¡æ ¸ AI Agentã€‚åˆ¤æ–­ä»¥ä¸‹å†…å®¹æ˜¯å¦è¿åè§„åˆ™ï¼š
   [è§„åˆ™åˆ—è¡¨]

   å†…å®¹ï¼š
   [ç”¨æˆ·å†…å®¹]

   è¿”å› JSONï¼š
   { "decision": "Pass" æˆ– "Reject", "confidence": 0-100, "reason": "æ‹’ç»åŸå› " }
   ```

7. å®ç° API ç«¯ç‚¹ `POST /agent/moderate`ï¼š
   - æ¥æ”¶ `{ content: string, agentAddress: string }`
   - éªŒè¯è¯·æ±‚æ¥è‡ªåˆæ³• Agentï¼ˆæ£€æŸ¥ Agent æ˜¯å¦æ³¨å†Œï¼‰
   - è°ƒç”¨ `moderateContent()`
   - è®°å½•å®¡æ ¸æ—¥å¿—åˆ°æ•°æ®åº“ï¼ˆç”¨äºåç»­ä¿¡èª‰è®¡ç®—ï¼‰
   - è¿”å›åˆ¤æ–­ç»“æœ
8. å®ç°æˆæœ¬æ§åˆ¶ï¼š
   - Token é™åˆ¶ï¼ˆå†…å®¹ â‰¤ 280 å­—ç¬¦ï¼‰
   - ç¼“å­˜ç›¸åŒå†…å®¹çš„å®¡æ ¸ç»“æœï¼ˆ24 å°æ—¶ï¼‰
9. æµ‹è¯•ï¼šæäº¤åˆè§„å†…å®¹ï¼Œè¿”å› `{ decision: 'Pass', confidence: 95 }`
10. æµ‹è¯•ï¼šæäº¤è¿è§„å†…å®¹ï¼ˆæš´åŠ›ï¼‰ï¼Œè¿”å› `{ decision: 'Reject', confidence: 98, reason: 'åŒ…å«æš´åŠ›å†…å®¹' }`
11. æµ‹è¯•ï¼šå¹¶å‘ 5 ä¸ª Agent è°ƒç”¨ï¼Œå“åº”æ—¶é—´ < 10 ç§’

## Story 4.3: å†…å®¹å®¡æ ¸å·¥ä½œæµæ™ºèƒ½åˆçº¦ï¼ˆModerationWorkflowï¼‰

As a **æ™ºèƒ½åˆçº¦å¼€å‘è€…**,  
I want **å¼€å‘å†…å®¹å®¡æ ¸å·¥ä½œæµåˆçº¦ï¼Œåè°ƒæ•´ä¸ªå®¡æ ¸æµç¨‹ï¼ˆè¯·æ±‚ VRF é€‰æ‹© Agent â†’ ç­‰å¾… Agent åˆ¤æ–­ â†’ æ‰§è¡ŒåŠ æƒå…±è¯†æŠ•ç¥¨ â†’ æ›´æ–°å†…å®¹çŠ¶æ€ï¼‰**,  
so that **å†…å®¹å®¡æ ¸è¿‡ç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ä¸”å»ä¸­å¿ƒåŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„**ã€‚

### Acceptance Criteria

1. åˆ›å»ºåˆçº¦ `src/ModerationWorkflow.sol`
2. å®šä¹‰ struct AgentJudgmentï¼šaddress agentã€bool decisionï¼ˆPass/Rejectï¼‰ã€uint8 confidenceï¼ˆ0-100ï¼‰ã€uint256 timestamp
3. å®šä¹‰ mappingï¼š`judgments[contentId][agentIndex] = AgentJudgment`ï¼ˆå­˜å‚¨ 5 ä¸ª Agent çš„åˆ¤æ–­ï¼‰
4. å®ç°å‡½æ•° `submitJudgment(uint256 contentId, bool decision, uint8 confidence)`ï¼š
   - éªŒè¯è°ƒç”¨è€…æ˜¯é€‰ä¸­çš„ 5 ä¸ª Agent ä¹‹ä¸€
   - éªŒè¯æœªé‡å¤æäº¤
   - å­˜å‚¨åˆ¤æ–­ç»“æœ
   - è§¦å‘äº‹ä»¶ `JudgmentSubmitted(uint256 indexed contentId, address indexed agent, bool decision)`
5. å®ç°å‡½æ•° `executeConsensus(uint256 contentId)`ï¼ˆ5 ä¸ª Agent éƒ½æäº¤åè‡ªåŠ¨è°ƒç”¨ï¼‰ï¼š
   - è¯»å–æ¯ä¸ª Agent çš„åˆ¤æ–­å’Œä¿¡èª‰è¯„åˆ†
   - è®¡ç®—åŠ æƒå¾—åˆ†ï¼š`score = Î£(decision Ã— confidence Ã— agentReputation) / Î£(agentReputation)`
   - å¦‚æœ score > 0.6ï¼Œè®¾ç½®å†…å®¹çŠ¶æ€ä¸º Approved
   - å¦åˆ™è®¾ç½®ä¸º Rejected
   - è§¦å‘äº‹ä»¶ `ModerationCompleted(uint256 indexed contentId, bool approved, uint256 score)`
6. å®ç°å‡½æ•° `getModerationResult(uint256 contentId)` è¿”å›å®¡æ ¸ç»“æœå’Œæ‰€æœ‰ Agent åˆ¤æ–­
7. å®ç°è¶…æ—¶æœºåˆ¶ï¼š24 å°æ—¶å†…æœªå®Œæˆå®¡æ ¸ï¼Œè‡ªåŠ¨æ‹’ç»ï¼ˆé˜²æ­¢ Agent ä¸å“åº”ï¼‰
8. ç¼–å†™æµ‹è¯• `test/ModerationWorkflow.t.sol`ï¼š
   - æµ‹è¯• 5 ä¸ª Agent å…¨éƒ¨ Pass â†’ Approved
   - æµ‹è¯• 3 Pass + 2 Reject â†’ æ ¹æ®æƒé‡è®¡ç®—
   - æµ‹è¯•åŠ æƒæŠ•ç¥¨æ­£ç¡®æ€§
   - æµ‹è¯•è¶…æ—¶æ‹’ç»
9. è¿è¡Œ `forge test` æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œè¦†ç›–ç‡ > 90%
10. éƒ¨ç½²åˆ°æœ¬åœ° Anvil

## Story 4.4: åç«¯å®¡æ ¸åè°ƒæœåŠ¡ï¼ˆOrchestratorï¼‰

As a **åç«¯å¼€å‘è€…**,  
I want **å¼€å‘å®¡æ ¸åè°ƒæœåŠ¡ï¼Œç›‘å¬ `AgentsSelected` äº‹ä»¶ï¼Œè‡ªåŠ¨è°ƒç”¨ 5 ä¸ª Agent çš„å®¡æ ¸ç«¯ç‚¹ï¼Œæ”¶é›†åˆ¤æ–­ç»“æœå¹¶æäº¤åˆ°æ™ºèƒ½åˆçº¦**,  
so that **å®¡æ ¸æµç¨‹è‡ªåŠ¨åŒ–æ‰§è¡Œï¼ŒAgent æœåŠ¡æ— éœ€ç›´æ¥ä¸åŒºå—é“¾äº¤äº’ï¼Œé™ä½ Agent è¿è¥é—¨æ§›**ã€‚

### Acceptance Criteria

1. åœ¨ `src/services/orchestrator.ts` åˆ›å»ºåè°ƒæœåŠ¡
2. ä½¿ç”¨ viem ç›‘å¬ `AgentSelector` åˆçº¦çš„ `AgentsSelected` äº‹ä»¶
3. äº‹ä»¶è§¦å‘æ—¶ï¼š
   - è·å– contentId å’Œé€‰ä¸­çš„ 5 ä¸ª Agent åœ°å€
   - ä» AgentRegistry è¯»å–æ¯ä¸ª Agent çš„ serviceEndpoint
   - ä» IPFS åŠ è½½å†…å®¹æ–‡æœ¬
   - å¹¶è¡Œè°ƒç”¨ 5 ä¸ª Agent çš„ `/moderate` ç«¯ç‚¹ï¼ˆHTTP POSTï¼‰
   - æ”¶é›†åˆ¤æ–­ç»“æœ
4. å®ç°å‡½æ•° `callAgentService(endpoint: string, content: string)`ï¼š
   - HTTP POST åˆ° `${endpoint}/moderate`
   - è¯·æ±‚ä½“ï¼š`{ content: string }`
   - è¶…æ—¶æ—¶é—´ï¼š15 ç§’
   - è¿”å›ï¼š`{ decision, confidence, reason }`
5. æ”¶é›†åˆ°æ‰€æœ‰ 5 ä¸ªåˆ¤æ–­åï¼Œè°ƒç”¨æ™ºèƒ½åˆçº¦ `ModerationWorkflow.submitJudgment()`ï¼ˆ5 æ¬¡äº¤æ˜“ï¼‰
6. å®ç°é‡è¯•æœºåˆ¶ï¼šAgent æœåŠ¡ä¸å¯ç”¨æ—¶é‡è¯• 3 æ¬¡
7. å®ç°é™çº§ç­–ç•¥ï¼šæŸä¸ª Agent è¶…æ—¶ï¼Œä½¿ç”¨é»˜è®¤åˆ¤æ–­ï¼ˆRejectï¼Œä½ç½®ä¿¡åº¦ï¼‰
8. è®°å½•å®¡æ ¸æ—¥å¿—åˆ°æ•°æ®åº“ï¼ˆModerationLog è¡¨ï¼‰ï¼š
   - contentIdã€agentAddressã€decisionã€confidenceã€responseTimeã€timestamp
9. å®ç° API ç«¯ç‚¹ `GET /moderation/:contentId/status`ï¼šè¿”å›å®¡æ ¸è¿›åº¦ï¼ˆ5 ä¸ª Agent ä¸­å·²å®Œæˆå‡ ä¸ªï¼‰
10. æµ‹è¯•ï¼šå‘å¸ƒå†…å®¹ â†’ è§¦å‘ VRF â†’ AgentsSelected äº‹ä»¶ â†’ è‡ªåŠ¨è°ƒç”¨ Agent æœåŠ¡ â†’ æäº¤åˆ¤æ–­
11. æµ‹è¯•ï¼šå®¡æ ¸æµç¨‹ < 30 ç§’ï¼ˆ5 ä¸ª Agent å¹¶è¡Œï¼‰

## Story 4.5: å®¡æ ¸è¿›åº¦ä¸ç»“æœå‰ç«¯å±•ç¤º

As a **ç”¨æˆ·**,  
I want **å‘å¸ƒå†…å®¹åï¼Œåœ¨æ—¶é—´çº¿çœ‹åˆ°"å®¡æ ¸ä¸­"çŠ¶æ€å’Œè¿›åº¦æ¡ï¼ˆ5 ä¸ª Agent åˆ¤æ–­è¿›åº¦ï¼‰ï¼Œå®¡æ ¸å®ŒæˆåæŸ¥çœ‹è¯¦ç»†ç»“æœï¼ˆå“ªäº› Agent é€šè¿‡/æ‹’ç»ã€æœ€ç»ˆå¾—åˆ†ï¼‰**,  
so that **æˆ‘å¯ä»¥å®æ—¶äº†è§£å®¡æ ¸è¿›åº¦ï¼Œç†è§£å†…å®¹ä¸ºä½•è¢«é€šè¿‡æˆ–æ‹’ç»ï¼ˆé€æ˜åº¦æ ¸å¿ƒåŠŸèƒ½ï¼‰**ã€‚

### Acceptance Criteria

1. ä¿®æ”¹ Story 3.3 çš„å‘å¸ƒæµç¨‹ï¼š
   - è°ƒç”¨ `ContentRegistry.publishContent()` åï¼Œå†…å®¹çŠ¶æ€ä¸º Pending
   - è‡ªåŠ¨è§¦å‘ `AgentSelector.requestAgentSelection()`
   - æ˜¾ç¤º"å®¡æ ¸ä¸­"çŠ¶æ€
2. å¸–å­å¡ç‰‡åœ¨å®¡æ ¸æœŸé—´æ˜¾ç¤ºï¼ˆshadcn Alertï¼‰ï¼š
   - "ğŸ• å®¡æ ¸ä¸­..."
   - è¿›åº¦æ¡ï¼ˆ5 ä¸ª Agentï¼Œå·²å®Œæˆ 2/5ï¼‰
   - "é¢„è®¡è¿˜éœ€ 20 ç§’"
3. å®ç°å‰ç«¯è½®è¯¢ï¼š
   - æ¯ 5 ç§’è°ƒç”¨ `GET /moderation/:contentId/status`
   - æ›´æ–°è¿›åº¦æ¡ï¼ˆå·²å®Œæˆçš„ Agent æ•°é‡ï¼‰
4. å®¡æ ¸å®Œæˆåï¼ˆApprovedï¼‰ï¼š
   - å¸–å­å¡ç‰‡æ­£å¸¸æ˜¾ç¤º
   - æ·»åŠ "âœ… å·²é€šè¿‡å®¡æ ¸"å¾½ç« ï¼ˆshadcn Badgeï¼‰
5. å®¡æ ¸æ‹’ç»åï¼ˆRejectedï¼‰ï¼š
   - å¸–å­å¡ç‰‡æ˜¾ç¤º"âŒ å†…å®¹æœªé€šè¿‡å®¡æ ¸"
   - æ˜¾ç¤ºæ‹’ç»åŸå› ï¼ˆæ±‡æ€» Agent çš„ reasonï¼‰
   - æä¾›"ç”³è¯‰"æŒ‰é’®ï¼ˆPhase 2 åŠŸèƒ½ï¼Œæš‚æ—¶å ä½ï¼‰
6. ç‚¹å‡»å¸–å­å¡ç‰‡çš„"æŸ¥çœ‹å®¡æ ¸è¯¦æƒ…"é“¾æ¥ï¼Œå¼¹å‡º Dialogï¼š
   - æ˜¾ç¤º 5 ä¸ª Agent å¡ç‰‡ï¼ˆåœ°å€ã€ä¿¡èª‰è¯„åˆ†ã€åˆ¤æ–­ã€ç½®ä¿¡åº¦ï¼‰
   - æ˜¾ç¤ºæœ€ç»ˆåŠ æƒå¾—åˆ†ï¼ˆå¯è§†åŒ–ï¼šè¿›åº¦æ¡ + æ•°å­—ï¼‰
   - æ˜¾ç¤ºå®¡æ ¸æ—¶é—´çº¿ï¼ˆæ¯ä¸ª Agent çš„åˆ¤æ–­æ—¶é—´ï¼‰
7. ä½¿ç”¨ shadcn Table æˆ– Card å±•ç¤º Agent åˆ¤æ–­
8. é¢œè‰²ç¼–ç ï¼šPass ç»¿è‰²ã€Reject çº¢è‰²
9. å“åº”å¼ï¼šç§»åŠ¨ç«¯ Dialog å…¨å±
10. æ€§èƒ½ï¼šå®¡æ ¸è¯¦æƒ…åŠ è½½ < 1 ç§’

## Story 4.6: ä¿®æ”¹å†…å®¹å‘å¸ƒæµç¨‹é›†æˆå®¡æ ¸

As a **ç”¨æˆ·**,  
I want **å‘å¸ƒå†…å®¹åï¼Œå†…å®¹å…ˆè¿›å…¥å®¡æ ¸æµç¨‹ï¼ˆé€‰æ‹© Agent â†’ Agent å®¡æ ¸ â†’ å…±è¯†æŠ•ç¥¨ï¼‰ï¼Œé€šè¿‡åè‡ªåŠ¨æ˜¾ç¤ºåœ¨æ—¶é—´çº¿ï¼Œæ‹’ç»åæ”¶åˆ°é€šçŸ¥**,  
so that **å¹³å°ä¸Šçš„å†…å®¹ç»è¿‡è´¨é‡æŠŠå…³ï¼Œåƒåœ¾å†…å®¹å’Œè¿è§„ä¿¡æ¯è¢«è¿‡æ»¤ï¼Œæˆ‘äº«å—é«˜è´¨é‡çš„å†…å®¹ç¯å¢ƒ**ã€‚

### Acceptance Criteria

1. ä¿®æ”¹ `ContentRegistry.publishContent()`ï¼š
   - å†…å®¹åˆå§‹çŠ¶æ€è®¾ä¸º Pendingï¼ˆè€Œé Approvedï¼‰
   - å‘å¸ƒåä¸ç«‹å³æ˜¾ç¤ºåœ¨æ—¶é—´çº¿
2. ä¿®æ”¹åç«¯ `POST /posts` APIï¼ˆä» Epic 3 æ‰©å±•ï¼‰ï¼š
   - ä¸Šä¼  IPFS
   - è°ƒç”¨ `ContentRegistry.publishContent()`
   - è‡ªåŠ¨è°ƒç”¨ `AgentSelector.requestAgentSelection()`
   - è¿”å› contentId å’Œ"å®¡æ ¸ä¸­"çŠ¶æ€
3. å‰ç«¯å‘å¸ƒæµç¨‹æ›´æ–°ï¼š
   - æ˜¾ç¤º"å†…å®¹å·²æäº¤ï¼Œç­‰å¾… Agent å®¡æ ¸..."
   - è·³è½¬åˆ°"æˆ‘çš„å¸–å­"é¡µé¢ï¼Œæ˜¾ç¤ºå®¡æ ¸è¿›åº¦
4. å®ç°"æˆ‘çš„å¸–å­"é¡µé¢ï¼ˆ`app/my-posts/page.tsx`ï¼‰ï¼š
   - æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„æ‰€æœ‰å¸–å­
   - åŒºåˆ†ï¼šå®¡æ ¸ä¸­ï¼ˆPendingï¼‰ã€å·²é€šè¿‡ï¼ˆApprovedï¼‰ã€å·²æ‹’ç»ï¼ˆRejectedï¼‰
   - å®¡æ ¸ä¸­çš„å¸–å­æ˜¾ç¤ºè¿›åº¦æ¡
5. å®¡æ ¸å®Œæˆåï¼š
   - å‰ç«¯æ”¶åˆ°é€šçŸ¥ï¼ˆEpic 1.12 çš„é€šçŸ¥ç³»ç»Ÿï¼‰
   - é€šçŸ¥å†…å®¹ï¼š"âœ… æ‚¨çš„å¸–å­å·²é€šè¿‡å®¡æ ¸ï¼" æˆ– "âŒ æ‚¨çš„å¸–å­æœªé€šè¿‡å®¡æ ¸"
6. ä¿®æ”¹æ—¶é—´çº¿ API `GET /feed`ï¼š
   - åªè¿”å› status = Approved çš„å†…å®¹
   - Pending å’Œ Rejected çš„å†…å®¹ä¸æ˜¾ç¤º
7. åœ¨ä¸ªäººä¸»é¡µï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„æ‰€æœ‰å¸–å­ï¼ˆåŒ…æ‹¬ Rejectedï¼‰
8. æµ‹è¯•ç«¯åˆ°ç«¯æµç¨‹ï¼šå‘å¸ƒ â†’ VRF é€‰æ‹© â†’ Agent å®¡æ ¸ â†’ å…±è¯†æŠ•ç¥¨ â†’ é€šè¿‡ â†’ æ˜¾ç¤ºåœ¨æ—¶é—´çº¿
9. æµ‹è¯•ï¼šå‘å¸ƒè¿è§„å†…å®¹ â†’ æ‹’ç» â†’ ä¸æ˜¾ç¤ºåœ¨æ—¶é—´çº¿ â†’ æ”¶åˆ°æ‹’ç»é€šçŸ¥
10. æ•´ä¸ªå®¡æ ¸æµç¨‹ < 30 ç§’

---

## ğŸ¤” Epic 4 è®¾è®¡ç†ç”±

**Story é¡ºåºï¼š**

1. **4.1 VRF é€‰æ‹©** - å®¡æ ¸æµç¨‹çš„ç¬¬ä¸€æ­¥
2. **4.2 Agent å®¡æ ¸æœåŠ¡** - æ ¸å¿ƒå®¡æ ¸é€»è¾‘
3. **4.3 å·¥ä½œæµåˆçº¦** - åè°ƒæ•´ä¸ªæµç¨‹
4. **4.4 åç«¯åè°ƒæœåŠ¡** - è‡ªåŠ¨åŒ–æ‰§è¡Œ
5. **4.5 å®¡æ ¸å±•ç¤º** - ç”¨æˆ·å¯è§æ€§ï¼ˆé€æ˜åº¦ï¼‰
6. **4.6 é›†æˆå‘å¸ƒæµç¨‹** - æ‰€æœ‰åŠŸèƒ½æ•´åˆ

**æŠ€æœ¯æŒ‘æˆ˜ï¼š**

- Chainlink VRF é›†æˆï¼ˆéœ€è¦ LINK ä»£å¸å’Œè®¢é˜…ï¼‰
- OpenAI API æˆæœ¬æ§åˆ¶ï¼ˆæ¯æ¬¡å®¡æ ¸çº¦ $0.005-0.01ï¼‰
- å®¡æ ¸æµç¨‹æ€§èƒ½ä¼˜åŒ–ï¼ˆ30 ç§’å†…å®Œæˆï¼‰

**å¯äº¤ä»˜ä»·å€¼ï¼š**

- Epic 4 å®Œæˆåï¼šæ‰€æœ‰å†…å®¹ç»è¿‡å»ä¸­å¿ƒåŒ–å®¡æ ¸ï¼Œæ ¸å¿ƒä»·å€¼ä¸»å¼ å®ç°

---

## ğŸ¯ è¯·é€‰æ‹©ä¸‹ä¸€æ­¥

**1.** ç»§ç»­ Epic 5ï¼ˆReputation System & Economic Incentivesï¼‰

**2.** è°ƒæ•´ Epic 4 çš„ Stories

**3.** æ·±åŒ–æŸä¸ª Storyï¼ˆå¦‚ï¼š4.2 OpenAI Prompt å·¥ç¨‹ï¼‰

---
